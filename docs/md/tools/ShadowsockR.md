# ShadowsocksR

> 参考：[ShadowSocksR(SSR)功能详细介绍及使用教程 - Mark's Blog - Quchao.net](https://www.quchao.net/ShadowsocksR.html)

## 1. 说明

SSR 是一个科学上网工具，仅仅是一个工具，代理服务器需要自己解决。

将下载好的压缩包解压，里面有两个`.exe`文件，分别是后缀`dotnet2.0`和`dotnet4.0`，如果电脑上已经安装了`NET Framework 4.0`，那么可以使用`dotnet4.0`版本。

打开程序后，程序会在后台运行，在托盘可以看到一个小飞机的 logo ，程序运行后可以进行后续的操作。

## 2. 添加服务器节点

- 二维码导入

  将服务器供应商给的 SSR 链接二维码放到屏幕中间，**右键小飞机→二维码扫描**导入节点。

- 剪贴板导入 SSR 链接

  复制 SSR 链接，**右键小飞机→剪贴板批量导入**。

- 服务器订阅

  **右键小飞机→服务器订阅→SSR服务器订阅设置**，将供应商给的订阅链接添加进去。此时可以将默认的订阅链接删除，已经没有用了。

## 3. 系统代理模式

- 直连模式

  关闭系统 HTTP 代理，所有上网流量都不会通过 SSR 代理，在这个模式下只能够使用`Socks5`代理方式连接 SSR 代理，浏览器中搭配`SwitchyOmega`使用。

- PAC模式

  会修改系统 IE 代理，使用 PAC 文件控制代理。该文件包含了规则列表，可以控制哪些流量走 SSR ，哪些不走。一般很少用这个模式，SSR 的**代理规则**已经可以完全替代该模式。

- 全局模式

  开启系统 HTTP 代理，所有流量都会通过 SSR 代理。

- 保持当前状态不修改

  不会修改当前系统代理。

## 4. 代理规则

代理规则指的是，对于所有通过系统 HTTP 代理或者 SOCKS5 代理被发送至 SSR 的流量，按照你设置的规则进行代理，即智能代理。

- 绕过xxx

  绕过即不走代理，绕过局域网指的是浏览局域网时不走代理，绕过大陆指的是所有国内的流量都不走代理。

- 绕过非大陆

  国外访问国内的时候用到。

- 用户自定义

  自定义代理规则，格式：https://adblockplus.org/en/filter-cheatsheet

- 全局模式

  所有经过 SSR 的流量都走代理。

## 5. 服务器

一般通过供应商给的链接或订阅链接更新的服务器节点，都不再需要自己手动配置。

- 编辑服务器

  双击小飞机，可以直接打开服务器编辑窗口。

- 从文件导入服务器

  可以导入供应商提供的服务器配置文件。

- 服务器连接统计

  显示当前 SSR 所有服务器的统计信息。

## 6. 常见问题

### 6.1 使用了代理但是 IP 还是国内的

可能是使用了国内的 IP 查询服务，而代理模式设置的是“绕过局域网和大陆”。使用国外的 IP 查询服务或将代理模式修改为“全局”。

### 6.2 无法访问外网

执行`ipconfig /flushdns`。

### 6.3 无法更新订阅

在关闭代理的情况下，将订阅链接丢到浏览器，如果能正常访问，会出现一堆乱七八糟的字符。如果没出现，那么检查链接是否正确。如果出现了，那么选择不通过代理更新订阅。

### 6.4 服务器正确配置了但无法使用代理上网

1. ping 服务器地址，检查是否连接上服务器；
2. 检查服务器配置（订阅或导入的一般没错）；
3. 检查代理规则，系统代理模式选择**“全局模式”**，代理规则选择**“绕过局域网和大陆”**；
4. 浏览器选择**“系统代理”**。

## 7. 浏览器配合 SwitchyOmege 使用

1. 安装 SwitchyOmege 插件；

2. 点击“新建情景模式”，选择“代理服务器”，代理协议选择 SOCKS5，端口与小飞机的本地端口一样，**右键小飞机→选项设置→本地端口**，设置完端口后保存；

3. 点击“新建情景模式”，选择“自动切换模式”，情景模式选择上一步新建的模式，规则列表自动更新。

   规则列表地址：`https://github.com/17mon/china_ip_list/blob/master/china_ip_list.txt`